(()=>{"use strict";var e=document.querySelector(".popup-profile"),t=document.querySelector(".popup-new-card"),n=document.forms["edit-profile"],r=document.forms["edit-card"],o=document.querySelector(".popup-image"),c=o.querySelector(".popup__image"),s=o.querySelector(".popup__image-caption"),u=document.querySelector(".profile").querySelector(".profile__info"),i=u.querySelector(".profile__caption"),a=i.querySelector(".profile__title"),l=u.querySelector(".profile__job"),p=i.querySelector(".profile__edit-button"),d=document.querySelectorAll(".popup"),m=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");t&&_(t)}},f=function(e,t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-button"))&&_(e)};function v(e){e.classList.add("popup_opened"),document.addEventListener("keydown",m)}function _(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",m)}var y,S=document.getElementById("cardElementTemplate").content,E=document.querySelector(".cards__elements"),k=document.querySelector(".profile__add-button");function g(e){var t,n,r=e.target;t=r.alt,n=r.src,c.src=n,c.alt=t,s.textContent=t,v(o)}function q(e){e.target.classList.toggle("heart_active")}function L(e){e.target.closest(".element").remove()}function b(e,t){var n=S.cloneNode(!0),r=n.querySelector(".element__image");return r.src=t,r.alt=e,r.addEventListener("click",g),n.querySelector(".element__title").textContent=e,n.querySelector(".heart").addEventListener("click",q),n.querySelector(".element__trash").addEventListener("click",L),n}function h(e){E.prepend(e)}function C(e){e.disabled=!0}function x(e,t){e.checkValidity()?function(e){e.disabled=!1}(t):C(t)}d.forEach((function(e){e.addEventListener("mousedown",f.bind(null,e))})),k.addEventListener("click",(function(){return v(t)})),p.addEventListener("click",(function(){n.username.value=a.textContent,n.job.value=l.textContent,v(e)})),n.addEventListener("submit",(function(t){t.preventDefault(),a.textContent=n.username.value,l.textContent=n.job.value,_(e)})),r.addEventListener("submit",(function(e){e.preventDefault(),h(b(r.place.value,r.url.value)),_(t),r.reset()})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){h(b(e.name,e.link))})),y={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},document.querySelectorAll(y.formSelector).forEach((function(e){var t=y.submitButtonSelector,n=y.inputSelector,r=e.querySelector(t);e.querySelectorAll(n).forEach((function(t){t.addEventListener("input",(function(){return function(t){x(e,r),function(e,t){e.validity.valid?function(e,t,n){e.classList.remove(t);var r="error-"+e.name,o=document.getElementById(r);o.classList.remove(n),o.textContent=""}(e,t.inputErrorClass,t.errorClass):function(e,t,n,r){e.classList.add(n);var o="error-"+e.name,c=document.getElementById(o);c.classList.add(r),c.textContent=t}(e,e.validationMessage,t.inputErrorClass,t.errorClass)}(t,y)}(t)}))})),x(e,r),e.addEventListener("reset",(function(){C(r)}))}))})();