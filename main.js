(()=>{"use strict";var e=document.querySelector(".popup-profile"),t=e.querySelector(".popup__form"),n=t.querySelector(".popup__input-username"),r=t.querySelector(".popup__input-job"),o=document.querySelector(".popup-new-card"),c=o.querySelector(".popup__form"),u=c.querySelector(".popup__input-name"),p=c.querySelector(".popup__input-link"),l=document.querySelector(".popup-image"),i=l.querySelector(".popup__image"),a=l.querySelector(".popup__image-caption"),s=document.querySelector(".profile > .profile__info"),d=s.querySelector(".profile__caption"),m=d.querySelector(".profile__title"),_=s.querySelector(".profile__job"),f=d.querySelector(".profile__edit-button"),v=document.querySelectorAll(".popup"),y=document.querySelectorAll(".popup__close-button"),S=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");t&&E(t)}},q=function(e){var t=e.currentTarget.classList.contains("popup")?e.target:e.target.closest(".popup");t&&E(t)};function k(e){e.classList.add("popup_opened"),document.addEventListener("keydown",S)}function E(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",S)}var g,L=document.getElementById("cardElementTemplate").content,h=document.querySelector(".cards__elements"),b=document.querySelector(".profile__add-button");function C(e){var t,n,r=e.target;t=r.alt,n=r.src,i.src=n,i.alt=t,a.textContent=t,k(l)}function x(e){e.target.classList.toggle("heart_active")}function j(e){e.target.closest(".element").remove()}function B(e,t){var n=L.cloneNode(!0),r=n.querySelector(".element__image");return r.src=t,r.alt=e,r.addEventListener("click",C),n.querySelector(".element__title").textContent=e,n.querySelector(".heart").addEventListener("click",x),n.querySelector(".element__trash").addEventListener("click",j),n}function w(e){h.prepend(e)}function A(e,t){e.checkValidity()?function(e){e.disabled=!1}(t):function(e){e.disabled=!0}(t)}v.forEach((function(e){return e.addEventListener("mousedown",q)})),y.forEach((function(e){return e.addEventListener("click",q)})),b.addEventListener("click",(function(){return k(o)})),f.addEventListener("click",(function(){n.value=m.textContent,r.value=_.textContent,k(e)})),t.addEventListener("submit",(function(t){t.preventDefault(),m.textContent=n.value,_.textContent=r.value,E(e)})),c.addEventListener("submit",(function(e){e.preventDefault(),w(B(u.value,p.value)),E(o),c.reset()})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){w(B(e.name,e.link))})),g={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},document.querySelectorAll(g.formSelector).forEach((function(e){var t=g.submitButtonSelector,n=g.inputSelector,r=e.querySelector(t);e.querySelectorAll(n).forEach((function(t){t.addEventListener("input",(function(){return function(t){A(e,r),function(e,t){e.validity.valid?function(e,t,n){e.classList.remove(t);var r="error-"+e.id,o=document.getElementById(r);o.classList.remove(n),o.textContent=""}(e,t.inputErrorClass,t.errorClass):function(e,t,n,r){e.classList.add(n);var o="error-"+e.id,c=document.getElementById(o);c.classList.add(r),c.textContent=t}(e,e.validationMessage,t.inputErrorClass,t.errorClass)}(t,g)}(t)}))})),A(e,r)}))})();